<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Centos7.9 + Ceph-ansible安装Ceph Octopus | Oh Ops Blog</title>
  <meta name="keywords" content=" ceph ">
  <meta name="description" content="Centos7.9 + Ceph-ansible安装Ceph Octopus | Oh Ops Blog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="Here&#39;s something encrypted, password is required to continue reading.">
<meta property="og:type" content="website">
<meta property="og:title" content="Oh Ops Blog">
<meta property="og:url" content="https://blog.ohops.org/gallery/index.html">
<meta property="og:site_name" content="Oh Ops Blog">
<meta property="og:description" content="Here&#39;s something encrypted, password is required to continue reading.">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-08-15T08:55:15.843Z">
<meta property="article:modified_time" content="2025-08-15T08:55:15.843Z">
<meta property="article:author" content="ErrorMan">
<meta property="article:tag" content="ops">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/icon.png">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/github.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.3.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpeg"/>
</a>
<div class="author">
    <span>ErrorMan</span>
</div>

<div class="icon">
    
        
            <a title="email"
               href="mailto:chinaops666@gmail.com"
               target="_blank">
                
                    <i class="iconfont icon-email"></i>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/XuHandsome"
               target="_blank">
                
                    <i class="iconfont icon-github"></i>
                
            </a>
        
    
        
            <a title="weibo"
               href="https://r.ohops.org"
               target="_blank">
                
                    <i class="iconfont icon-weibo"></i>
                
            </a>
        
    
</div>



    <a class="more-menus">更多菜单</a>


<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(27)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="运维">
                        
                        运维
                        <small>(19)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="CEPH">
                        
                        CEPH
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="云原生">
                        
                        云原生
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="虚拟化">
                        
                        虚拟化
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="日记">
                        
                        日记
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
                <a class="dynamic-menu site_url"
                   
                   href="/gallery/">相册</a>
        
            
    </div>
    <div>
        
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="27">
<input type="hidden" id="yelog_site_word_count" value="25.9k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://r.ohops.org/">Run</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>服务注册中心</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>配置中心</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>随手</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ansible</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>bind</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>centos</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ceph</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>cka</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>consul</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>debian</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>dell</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>elk</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>k8s</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>kernel</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>kubernetes</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>linux</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>openldap</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Ops</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>prometheus</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pve</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        
        <a  class="全部文章 云原生 "
           href="/2025/08/15/K8S%E4%B8%80%E4%BA%9B%E8%BF%9B%E9%98%B6%E8%BF%90%E7%BB%B4%E7%9F%A5%E8%AF%86/"
           data-tag="kubernetes,k8s,cka"
           data-author="ErrorMan" >
            <span class="post-title" title="K8S一些进阶运维知识">K8S一些进阶运维知识</span>
            <span class="post-date" title="2025-08-15 15:40:47">2025/08/15</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2025/08/15/Linux%E8%BF%9B%E7%A8%8B%E4%B8%8ECPU%E7%9B%B8%E5%85%B3%E5%9F%BA%E7%A1%80/"
           data-tag="linux,Ops"
           data-author="ErrorMan" >
            <span class="post-title" title="Linux进程与CPU相关基础">Linux进程与CPU相关基础</span>
            <span class="post-date" title="2025-08-15 15:36:58">2025/08/15</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2025/08/15/ISO%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B%E4%B8%8ETCP%E8%BF%9E%E6%8E%A5%E5%9F%BA%E7%A1%80/"
           data-tag="linux,Ops"
           data-author="ErrorMan" >
            <span class="post-title" title="ISO七层模型与TCP连接基础">ISO七层模型与TCP连接基础</span>
            <span class="post-date" title="2025-08-15 15:34:08">2025/08/15</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2025/08/15/Elasticsearch%E8%BF%90%E7%BB%B4%E8%BF%9B%E9%98%B6/"
           data-tag="elk"
           data-author="ErrorMan" >
            <span class="post-title" title="Elasticsearch运维进阶">Elasticsearch运维进阶</span>
            <span class="post-date" title="2025-08-15 15:29:45">2025/08/15</span>
        </a>
        
        
        <a  class="全部文章 云原生 "
           href="/2023/08/02/CKA/"
           data-tag="kubernetes,k8s,cka"
           data-author="ErrorMan" >
            <span class="post-title" title="CKA试题">CKA试题</span>
            <span class="post-date" title="2023-08-02 16:18:00">2023/08/02</span>
        </a>
        
        
        <a  class="全部文章 CEPH "
           href="/2023/02/19/Ceph%E6%97%A5%E5%B8%B8%E8%BF%90%E7%BB%B4/"
           data-tag="ceph"
           data-author="ErrorMan" >
            <span class="post-title" title="Ceph日常运维">Ceph日常运维</span>
            <span class="post-date" title="2023-02-19 09:01:05">2023/02/19</span>
        </a>
        
        
        <a  class="全部文章 CEPH "
           href="/2023/02/19/Ceph%E5%81%A5%E5%BA%B7%E5%91%8A%E8%AD%A6+%E9%92%89%E9%92%89/"
           data-tag="ceph"
           data-author="ErrorMan" >
            <span class="post-title" title="Ceph健康告警+钉钉">Ceph健康告警+钉钉</span>
            <span class="post-date" title="2023-02-19 09:00:29">2023/02/19</span>
        </a>
        
        
        <a  class="全部文章 日记 "
           href="/2023/02/19/%E6%91%B8%E9%B1%BC%E7%AC%94%E8%AE%B0/"
           data-tag="随手"
           data-author="ErrorMan" >
            <span class="post-title" title="摸鱼笔记">摸鱼笔记</span>
            <span class="post-date" title="2023-02-19 09:00:00">2023/02/19</span>
        </a>
        
        
        <a  class="全部文章 CEPH "
           href="/2023/02/19/Ceph%E8%BF%90%E7%BB%B4%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"
           data-tag="ceph"
           data-author="ErrorMan" >
            <span class="post-title" title="Ceph运维常用命令整理">Ceph运维常用命令整理</span>
            <span class="post-date" title="2023-02-19 08:48:50">2023/02/19</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/09/19/Elasticsearch8%E5%B0%8F%E8%AE%B0/"
           data-tag="elk"
           data-author="ErrorMan" >
            <span class="post-title" title="Elasticsearch8小记">Elasticsearch8小记</span>
            <span class="post-date" title="2022-09-19 17:58:48">2022/09/19</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/09/16/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%9B%86%E5%90%88/"
           data-tag="linux,Ops"
           data-author="ErrorMan" >
            <span class="post-title" title="Linux常用命令集合">Linux常用命令集合</span>
            <span class="post-date" title="2022-09-16 20:00:45">2022/09/16</span>
        </a>
        
        
        <a  class="全部文章 云原生 "
           href="/2022/09/16/openldap-exporter-in-docker-prometheus-operator/"
           data-tag="prometheus,openldap"
           data-author="ErrorMan" >
            <span class="post-title" title="Openldap-exporter in docker + prometheus operator">Openldap-exporter in docker + prometheus operator</span>
            <span class="post-date" title="2022-09-16 19:46:46">2022/09/16</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/09/14/Elasticsearch8%E6%93%8D%E4%BD%9C%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"
           data-tag="elk"
           data-author="ErrorMan" >
            <span class="post-title" title="Elasticsearch8操作踩坑记录">Elasticsearch8操作踩坑记录</span>
            <span class="post-date" title="2022-09-14 21:29:59">2022/09/14</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/09/14/Dell%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%BF%87Ansible%E6%89%B9%E9%87%8F%E9%85%8D%E7%BD%AERaid0/"
           data-tag="linux,debian,dell"
           data-author="ErrorMan" >
            <span class="post-title" title="Dell服务器通过Ansible批量配置Raid0">Dell服务器通过Ansible批量配置Raid0</span>
            <span class="post-date" title="2022-09-14 12:17:42">2022/09/14</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/09/14/Debian11-PVE7-1-%E5%AE%89%E8%A3%85DellRacadm-DCISM/"
           data-tag="linux,debian,dell"
           data-author="ErrorMan" >
            <span class="post-title" title="Debian11安装DellRacadm+DCISM">Debian11安装DellRacadm+DCISM</span>
            <span class="post-date" title="2022-09-14 10:41:39">2022/09/14</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/09/09/Linux%E7%BD%91%E5%8D%A1Bond%E5%90%8E%E8%8E%B7%E5%8F%96%E7%9C%9F%E5%AE%9EMAC%E5%9C%B0%E5%9D%80/"
           data-tag="linux,Ops"
           data-author="ErrorMan" >
            <span class="post-title" title="Linux网卡Bond后获取真实MAC地址">Linux网卡Bond后获取真实MAC地址</span>
            <span class="post-date" title="2022-09-09 12:15:19">2022/09/09</span>
        </a>
        
        
        <a  class="全部文章 虚拟化 "
           href="/2022/09/06/PVE%E5%B5%8C%E5%A5%97%E8%99%9A%E6%8B%9F%E5%8C%96/"
           data-tag="Ops,pve"
           data-author="ErrorMan" >
            <span class="post-title" title="PVE嵌套虚拟化">PVE嵌套虚拟化</span>
            <span class="post-date" title="2022-09-06 16:39:40">2022/09/06</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/09/05/debian11%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%E6%BA%90/"
           data-tag="linux,Ops"
           data-author="ErrorMan" >
            <span class="post-title" title="debian11清华大学源">debian11清华大学源</span>
            <span class="post-date" title="2022-09-05 16:27:40">2022/09/05</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/09/02/Windows%E5%BC%80%E5%90%AFWinRM/"
           data-tag="ansible"
           data-author="ErrorMan" >
            <span class="post-title" title="Windows开启WinRM">Windows开启WinRM</span>
            <span class="post-date" title="2022-09-03 00:45:14">2022/09/03</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/09/02/Consul%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/"
           data-tag="consul,服务注册中心,配置中心"
           data-author="ErrorMan" >
            <span class="post-title" title="Consul集群部署">Consul集群部署</span>
            <span class="post-date" title="2022-09-03 00:43:38">2022/09/03</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/09/02/Bind9%E4%B8%BB%E4%BB%8E-%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5%E9%98%BF%E9%87%8C%E4%BA%91PrivateZone/"
           data-tag="centos,bind"
           data-author="ErrorMan" >
            <span class="post-title" title="Bind9主从+实时同步阿里云PrivateZone">Bind9主从+实时同步阿里云PrivateZone</span>
            <span class="post-date" title="2022-09-02 21:18:52">2022/09/02</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/08/31/%E8%87%AA%E5%AE%9A%E4%B9%89Centos7-9%E9%95%9C%E5%83%8F-%E9%BB%98%E8%AE%A45-15%E5%86%85%E6%A0%B8/"
           data-tag="linux,kernel,centos"
           data-author="ErrorMan" >
            <span class="post-title" title="自定义Centos7.9镜像-默认5.15内核">自定义Centos7.9镜像-默认5.15内核</span>
            <span class="post-date" title="2022-08-31 17:26:33">2022/08/31</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/08/31/5-15-47/"
           data-tag="linux,kernel,centos"
           data-author="ErrorMan" >
            <span class="post-title" title="Centos7.9编译5.15.47版本内核">Centos7.9编译5.15.47版本内核</span>
            <span class="post-date" title="2022-08-31 17:26:02">2022/08/31</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/08/31/Elasticsearch%E7%B2%BE%E7%A1%AE%E7%B4%A2%E5%BC%95%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"
           data-tag="elk"
           data-author="ErrorMan" >
            <span class="post-title" title="Elasticsearch精确索引权限管理">Elasticsearch精确索引权限管理</span>
            <span class="post-date" title="2022-08-31 17:25:37">2022/08/31</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/08/31/Docker%E8%BF%90%E7%BB%B4%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%9B%86%E5%90%88/"
           data-tag="docker"
           data-author="ErrorMan" >
            <span class="post-title" title="Docker运维常用命令集合">Docker运维常用命令集合</span>
            <span class="post-date" title="2022-08-31 17:25:10">2022/08/31</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/08/31/Centos7%E4%BF%AE%E6%94%B9%E7%BD%91%E5%8D%A1%E5%90%8D%E7%A7%B0/"
           data-tag="linux,centos"
           data-author="ErrorMan" >
            <span class="post-title" title="Centos7修改网卡名称">Centos7修改网卡名称</span>
            <span class="post-date" title="2022-08-31 17:14:38">2022/08/31</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/08/31/Octopus/"
           data-tag="ceph"
           data-author="ErrorMan" >
            <span class="post-title" title="Centos7.9 + Ceph-ansible安装Ceph Octopus">Centos7.9 + Ceph-ansible安装Ceph Octopus</span>
            <span class="post-date" title="2022-08-31 17:14:15">2022/08/31</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Octopus" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Centos7.9 + Ceph-ansible安装Ceph Octopus</h1>
    
    <div class="article-meta">
        
        
        <span class="author"><a>ErrorMan</a></span>
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="运维">运维</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color5">ceph</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2025-08-15 16:55:15'>2022-08-31 17:14</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:2.1k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E9%83%A8%E7%BD%B2%E4%BF%A1%E6%81%AF"><span class="toc-text">一、部署信息</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%8A%82%E7%82%B9%E8%A7%84%E5%88%92"><span class="toc-text">二、节点规划</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%89%A7%E8%A1%8C%E9%83%A8%E7%BD%B2"><span class="toc-text">三、执行部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E5%87%86%E5%A4%87"><span class="toc-text">1.  基础准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%87%86%E5%A4%87"><span class="toc-text">2. 部署配置文件准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ceph-ansible-x2F-group-vars-x2F-all-yml"><span class="toc-text">ceph-ansible&#x2F;group_vars&#x2F;all.yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ceph-ansible-x2F-group-vars-x2F-osds-yml"><span class="toc-text">ceph-ansible&#x2F;group_vars&#x2F;osds.yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ceph-ansible-x2F-group-vars-x2F-mgrs-yml"><span class="toc-text">ceph-ansible&#x2F;group_vars&#x2F;mgrs.yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ceph-ansible-x2F-group-vars-x2F-rgwloadbalancers-yml"><span class="toc-text">ceph-ansible&#x2F;group_vars&#x2F;rgwloadbalancers.yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ceph-ansible-x2F-hosts"><span class="toc-text">ceph-ansible&#x2F;hosts</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%89%A7%E8%A1%8C%E9%83%A8%E7%BD%B2"><span class="toc-text">3.执行部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2%E5%90%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">四、部署后验证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%9B%86%E7%BE%A4%E5%81%A5%E5%BA%B7%E5%8F%8A%E5%B8%B8%E8%A7%81WARN%E5%A4%84%E7%90%86"><span class="toc-text">1. 集群健康及常见WARN处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-HEALTH-WARN-clock-skew-detected-on-mon-ceph-02"><span class="toc-text">a. HEALTH_WARN: clock skew detected on mon.ceph-02</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-HEALTH-WARN-mons-are-allowing-insecure-global-id-reclaim"><span class="toc-text">b. HEALTH_WARN:  mons are allowing insecure global_id reclaim</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Bucket%E5%8F%8AVIP%E9%AA%8C%E8%AF%81"><span class="toc-text">2. Bucket及VIP验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-VIP%E8%BF%9E%E9%80%9A%E6%80%A7"><span class="toc-text">a. VIP连通性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-%E5%AE%89%E8%A3%85S3%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-text">b. 安装S3客户端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-%E5%88%9B%E5%BB%BAbucket"><span class="toc-text">c. 创建bucket</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#d-%E4%B8%8A%E4%BC%A0%E6%B5%8B%E8%AF%95"><span class="toc-text">d. 上传测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6"><span class="toc-text">c. 下载文件</span></a></li></ol></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一、部署信息"><a href="#一、部署信息" class="headerlink" title="一、部署信息"></a>一、部署信息</h1><ul>
<li>Ceph版本号：Octopus &#x2F; 15.2.15</li>
<li>Ceph-Ansible版本：origin&#x2F;stable-5.0</li>
<li>Centos7.9 2009 + 5.15 Kernel</li>
<li>所有节点配置业务、集群通信双网口bond0.2049 + bond1.2060</li>
<li>所有osd节点12块2.2TB裸盘</li>
</ul>
<h1 id="二、节点规划"><a href="#二、节点规划" class="headerlink" title="二、节点规划"></a>二、节点规划</h1><table>
<thead>
<tr>
<th>主机地址（业务口）</th>
<th>网关</th>
<th>集群内地址</th>
<th>主机名称</th>
<th>主机角色</th>
</tr>
</thead>
<tbody><tr>
<td>IP：10.10.0.1&#x2F;22</td>
<td>10.10.3.254</td>
<td>IP：10.60.0.1&#x2F;22</td>
<td>ceph-mgr01</td>
<td>mgr，mon，osd，rgw，rbd，cephfs，mds</td>
</tr>
<tr>
<td>IP：10.10.0.2&#x2F;22</td>
<td>10.10.3.254</td>
<td>IP：10.60.0.2&#x2F;22</td>
<td>ceph-mgr02</td>
<td>mgr，mon，osd，rgw，rbd，cephfs，mds</td>
</tr>
<tr>
<td>IP：10.10.0.3&#x2F;22</td>
<td>10.10.3.254</td>
<td>IP：10.60.0.3&#x2F;22</td>
<td>ceph-mgr03</td>
<td>mgr，mon，osd，rgw，rbd，cephfs，mds</td>
</tr>
<tr>
<td>IP：10.10.0.4&#x2F;22</td>
<td>10.10.3.254</td>
<td>IP：10.60.0.4&#x2F;22</td>
<td>ceph-node01</td>
<td>osd，rgw，rbd，cephfs</td>
</tr>
<tr>
<td>IP：10.10.0.5&#x2F;22</td>
<td>10.10.3.254</td>
<td>IP：10.60.0.5&#x2F;22</td>
<td>ceph-node02</td>
<td>osd，rgw，rbd，cephfs</td>
</tr>
<tr>
<td>IP：10.10.0.6&#x2F;22</td>
<td>10.10.3.254</td>
<td>IP：10.60.0.6&#x2F;22</td>
<td>ceph-node03</td>
<td>osd，rgw，rbd，cephfs</td>
</tr>
<tr>
<td>IP：10.10.0.7&#x2F;22</td>
<td>10.10.3.254</td>
<td>IP：10.60.0.7&#x2F;22</td>
<td>ceph-node04</td>
<td>osd，rgw，rbd，cephfs</td>
</tr>
<tr>
<td>IP：10.10.0.8&#x2F;22</td>
<td>10.10.3.254</td>
<td>IP：10.60.0.8&#x2F;22</td>
<td>ceph-node05</td>
<td>osd，rgw，rbd，cephfs</td>
</tr>
<tr>
<td>IP：10.10.0.9&#x2F;22</td>
<td>10.10.3.254</td>
<td>IP：10.60.0.9&#x2F;22</td>
<td>ceph-node06</td>
<td>osd，rgw，rbd，cephfs</td>
</tr>
<tr>
<td>IP：10.10.0.10&#x2F;22</td>
<td>10.10.3.254</td>
<td>IP：10.60.0.10&#x2F;22</td>
<td>ceph-node07</td>
<td>osd，rgw，rbd，cephfs</td>
</tr>
<tr>
<td>VIP：10.10.0.250&#x2F;22</td>
<td>10.10.3.254</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ceph-mgr01-3、ceph-node01-7</td>
<td>keepalived，haproxy</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="三、执行部署"><a href="#三、执行部署" class="headerlink" title="三、执行部署"></a>三、执行部署</h1><h2 id="1-基础准备"><a href="#1-基础准备" class="headerlink" title="1.  基础准备"></a>1.  基础准备</h2><pre><code class="bash"># disable selinux，所有节点都要执行
setenforce 0
sed -i -e &#39;s/SELINUX=.*/SELINUX=disabled/g&#39; /etc/selinux/config

# stop firewalld，所有节点都要执行
systemctl disable --now firewalld
systemctl disable --now NetworkManager


# hosts，所有节点都要执行
cat &gt; /etc/hosts &lt;&lt; HOSTS
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
10.10.0.1  ceph1
10.10.0.2  ceph2
10.10.0.3  ceph3
10.10.0.4  ceph4
10.10.0.5  ceph5
10.10.0.6  ceph6
10.10.0.7  ceph7
10.10.0.8  ceph8
10.10.0.9  ceph9
10.10.0.10 ceph10
10.10.0.250 oss.xuhandsome.org #rgw存储桶访问入口
HOSTS


# 基础rpm包安装，所有节点都要执行
yum install -y -q epel-release
yum install -y -q python3 python3-pip python36-PyYAML python36-six python36-netaddr
pip3 install --upgrade pip -i https://pypi.tuna.tsinghua.edu.cn/simple
python3 -m pip install ansible==2.9 -i https://pypi.tuna.tsinghua.edu.cn/simple
python3 -m pip install six pecan werkzeug -i https://pypi.tuna.tsinghua.edu.cn/simple


# 配置ssh免密登录，部署机执行
ssh-keygen
for i in &#123;1..10&#125;;do ssh-copy-id ceph$i;done

# 下载ceph-ansible项目代码，部署机执行
git -b stable-5.0 clone https://github.com/ceph/ceph-ansible.git
cd ceph-ansible
cp site.yml.sample site.yml
</code></pre>
<h2 id="2-部署配置文件准备"><a href="#2-部署配置文件准备" class="headerlink" title="2. 部署配置文件准备"></a>2. 部署配置文件准备</h2><h3 id="ceph-ansible-x2F-group-vars-x2F-all-yml"><a href="#ceph-ansible-x2F-group-vars-x2F-all-yml" class="headerlink" title="ceph-ansible&#x2F;group_vars&#x2F;all.yml"></a>ceph-ansible&#x2F;group_vars&#x2F;all.yml</h3><pre><code class="yaml">cat ceph-ansible/group_vars/all.yml | grep -vE &#39;(^#|^$)&#39;
---
dummy:
configure_firewall: False
ceph_origin: repository
ceph_repository: community
ceph_mirror: http://mirrors.163.com/ceph
ceph_stable_key: &quot;&#123;&#123; ceph_mirror &#125;&#125;/keys/release.asc&quot;
ceph_stable_release: octopus
ceph_stable_repo: &quot;&#123;&#123; ceph_mirror &#125;&#125;/rpm-&#123;&#123; ceph_stable_release &#125;&#125;&quot;
cephx: true
monitor_interface: bond0.2049
ip_version: ipv4
pg_autoscale_mode: True
public_network: 10.10.0.0/22
cluster_network: 10.60.0.0/24
osd_objectstore: bluestore
osd_auto_discovery: true
radosgw_civetweb_port: 8080
radosgw_interface: bond0.2049
radosgw_address: &quot;&#123;&#123; inventory_hostname &#125;&#125;&quot;
rgw_multisite: true
rgw_multisite_proto: http
radosgw_frontend_port: 8081
rgw_instances:
  - instance_name: xuhandsome
    rgw_zone: huishan
    rgw_zonemaster: true
    rgw_zonesecondary: false
    rgw_zonegroup: jiangsu # should be set by the user
    rgw_zonegroupmaster: true
    rgw_zone_user: root
    rgw_zone_user_display_name: &quot;Root&quot;
    rgw_realm: cn # should be set by the user
    rgw_multisite_proto: &quot;&#123;&#123; rgw_multisite_proto &#125;&#125;&quot;
    radosgw_address: &quot;&#123;&#123; radosgw_address &#125;&#125;&quot;
    radosgw_frontend_port: &quot;&#123;&#123; radosgw_frontend_port &#125;&#125;&quot;
    system_access_key: p9wq0vsnRi7sTSz0Ls6L # should be re-created by the user
    system_secret_key: 4w4I3bOX0bFZ6YqCWOoDhJ03eTHIAUMohf6wDZC6 # should be re-created by the user
    # Multi-site remote pull URL variables
    #rgw_pull_port: &quot;&#123;&#123; radosgw_frontend_port &#125;&#125;&quot;
    #rgw_pull_proto: &quot;http&quot; # should be the same as rgw_multisite_proto for the master zone cluster
    #rgw_pullhost: localhost # rgw_pullhost only needs to be declared if there is a zone secondary.
dashboard_enabled: false
grafana_admin_password: admin
</code></pre>
<h3 id="ceph-ansible-x2F-group-vars-x2F-osds-yml"><a href="#ceph-ansible-x2F-group-vars-x2F-osds-yml" class="headerlink" title="ceph-ansible&#x2F;group_vars&#x2F;osds.yml"></a>ceph-ansible&#x2F;group_vars&#x2F;osds.yml</h3><pre><code class="yaml">---
dummy:
devices:
  - /dev/sdb
  - /dev/sdc
  - /dev/sdd
  - /dev/sde
  - /dev/sdf
  - /dev/sdg
  - /dev/sdh
  - /dev/sdi
  - /dev/sdj
  - /dev/sdk
  - /dev/sdl
  - /dev/sdm
</code></pre>
<h3 id="ceph-ansible-x2F-group-vars-x2F-mgrs-yml"><a href="#ceph-ansible-x2F-group-vars-x2F-mgrs-yml" class="headerlink" title="ceph-ansible&#x2F;group_vars&#x2F;mgrs.yml"></a>ceph-ansible&#x2F;group_vars&#x2F;mgrs.yml</h3><pre><code class="yaml">cat ceph-ansible/group_vars/mgrs.yml | grep -vE &#39;(^#|^$)&#39;
---
dummy:
copy_admin_key: true
</code></pre>
<h3 id="ceph-ansible-x2F-group-vars-x2F-rgwloadbalancers-yml"><a href="#ceph-ansible-x2F-group-vars-x2F-rgwloadbalancers-yml" class="headerlink" title="ceph-ansible&#x2F;group_vars&#x2F;rgwloadbalancers.yml"></a>ceph-ansible&#x2F;group_vars&#x2F;rgwloadbalancers.yml</h3><pre><code class="yaml">cat ceph-ansible/group_vars/rgwloadbalancers.yml | grep -vE &#39;(^#|^$)&#39;
---
dummy:
haproxy_frontend_port: 80
haproxy_frontend_ssl_port: 443
haproxy_ssl_dh_param: 4096
haproxy_ssl_ciphers:
 - EECDH+AESGCM
 - EDH+AESGCM
haproxy_ssl_options:
 - no-sslv3
 - no-tlsv10
 - no-tlsv11
 - no-tls-tickets
virtual_ips:
  - 10.10.0.250
virtual_ip_netmask: 22
virtual_ip_interface: bond0.2049
</code></pre>
<h3 id="ceph-ansible-x2F-hosts"><a href="#ceph-ansible-x2F-hosts" class="headerlink" title="ceph-ansible&#x2F;hosts"></a>ceph-ansible&#x2F;hosts</h3><pre><code class="bash">cat ceph-ansible/hosts
[mons]
10.10.0.1
10.10.0.2
10.10.0.3

[mgrs]
10.10.0.1
10.10.0.2
10.10.0.3

[mdss]
10.10.0.1
10.10.0.2
10.10.0.3

[osds]
10.10.0.1
10.10.0.2
10.10.0.3
10.10.0.4
10.10.0.5
10.10.0.6
10.10.0.7
10.10.0.8
10.10.0.9
10.10.0.10

[rgws]
10.10.0.1
10.10.0.2
10.10.0.3
10.10.0.4
10.10.0.5
10.10.0.6
10.10.0.7
10.10.0.8
10.10.0.9
10.10.0.10

[rbdmirrors]
10.10.0.1
10.10.0.2
10.10.0.3
10.10.0.4
10.10.0.5
10.10.0.6
10.10.0.7
10.10.0.8
10.10.0.9
10.10.0.10

[nfss]
10.10.0.1
10.10.0.2
10.10.0.3
10.10.0.4
10.10.0.5
10.10.0.6
10.10.0.7
10.10.0.8
10.10.0.9
10.10.0.10

[grafana-server]
10.10.0.1

[clients]
10.10.0.1
10.10.0.2
10.10.0.3

[rgwloadbalancers]
10.10.0.1
10.10.0.2
10.10.0.3
10.10.0.4
10.10.0.5
10.10.0.6
10.10.0.7
10.10.0.8
10.10.0.9
10.10.0.10
</code></pre>
<h2 id="3-执行部署"><a href="#3-执行部署" class="headerlink" title="3.执行部署"></a>3.执行部署</h2><pre><code class="bash">cd ceph-ansible
ansible-playbook -i hosts site.yml
</code></pre>
<h2 id="四、部署后验证"><a href="#四、部署后验证" class="headerlink" title="四、部署后验证"></a>四、部署后验证</h2><h3 id="1-集群健康及常见WARN处理"><a href="#1-集群健康及常见WARN处理" class="headerlink" title="1. 集群健康及常见WARN处理"></a>1. 集群健康及常见WARN处理</h3><pre><code class="bash">ceph -s
  cluster:
    id:     6d380cdd-3d1b-4400-a718-ad6d43ec5edd
    health: HEALTH_OK

  services:
    mon:        3 daemons, quorum Ceph-01,Ceph-02,Ceph-03 (age 47h)
    mgr:        Ceph-03(active, since 43h), standbys: Ceph-02, Ceph-01
    mds:        cephfs:1 &#123;0=Ceph-01=up:active&#125; 2 up:standby
    osd:        108 osds: 108 up (since 2d), 108 in (since 3d)
    rbd-mirror: 9 daemons active (65808, 69285, 69303, 69312, 75487, 78568, 78604, 85223, 88472)
    rgw:        18 daemons active (Ceph-01.xuhandsome, Ceph-01.rgw0, Ceph-02.xuhandsome, Ceph-02.rgw0, Ceph-03.xuhandsome, Ceph-03.rgw0, Ceph-04.xuhandsome, Ceph-04.rgw0, Ceph-05.xuhandsome, Ceph-05.rgw0, Ceph-06.xuhandsome, Ceph-06.rgw0, Ceph-07.xuhandsome, Ceph-07.rgw0, Ceph-09.xuhandsome, Ceph-09.rgw0, Ceph-10.xuhandsome, Ceph-10.rgw0)
    rgw-nfs:    9 daemons active (Ceph-01, Ceph-02, Ceph-03, Ceph-04, Ceph-05, Ceph-06, Ceph-07, Ceph-09, Ceph-10)

  task status:

  data:
    pools:   16 pools, 385 pgs
    objects: 825 objects, 634 MiB
    usage:   118 GiB used, 236 TiB / 236 TiB avail
    pgs:     385 active+clean
</code></pre>
<h4 id="a-HEALTH-WARN-clock-skew-detected-on-mon-ceph-02"><a href="#a-HEALTH-WARN-clock-skew-detected-on-mon-ceph-02" class="headerlink" title="a. HEALTH_WARN: clock skew detected on mon.ceph-02"></a>a. HEALTH_WARN: clock skew detected on mon.ceph-02</h4><p>这是集群时间不同步，前面ceph-ansible安装时已经安装了chronyd客户端，修改为同步阿里云ntp服务器</p>
<ol>
<li>修改配置文件</li>
</ol>
<pre><code class="bash">cat /etc/chrony.conf |grep -vE &#39;(^#|^$)&#39;
server ntp.aliyun.com iburst
server ntp1.aliyun.com iburst
server ntp2.aliyun.com iburst
server ntp3.aliyun.com iburst
server ntp4.aliyun.com iburst
server ntp5.aliyun.com iburst
server ntp6.aliyun.com iburst
server ntp7.aliyun.com iburst
server ntp.cloud.aliyuncs.com iburst
server ntp7.cloud.aliyuncs.com iburst
server ntp8.cloud.aliyuncs.com iburst
server ntp9.cloud.aliyuncs.com iburst
server ntp10.cloud.aliyuncs.com iburst
server ntp11.cloud.aliyuncs.com iburst
server ntp12.cloud.aliyuncs.com iburst
driftfile /var/lib/chrony/drift
makestep 1.0 3
rtcsync
stratumweight 0
allow 0.0.0.0/0
logdir /var/log/chrony
logchange 1
</code></pre>
<ol start="2">
<li>重启chronyd服务</li>
</ol>
<pre><code class="bash">systemctl restart chronyd
chronyc sources
</code></pre>
<ol start="3">
<li>重启ceph-mon服务</li>
</ol>
<pre><code class="bash">systemctl restart ceph-mon@&#123;nodename&#125;
systemctl restart ceph-mon.target
</code></pre>
<h4 id="b-HEALTH-WARN-mons-are-allowing-insecure-global-id-reclaim"><a href="#b-HEALTH-WARN-mons-are-allowing-insecure-global-id-reclaim" class="headerlink" title="b. HEALTH_WARN:  mons are allowing insecure global_id reclaim"></a>b. HEALTH_WARN:  mons are allowing insecure global_id reclaim</h4><p>查询相关文档在此<a target="_blank" rel="noopener" href="https://ceph.io/releases/v14-2-20-nautilus-released/">文档</a>中发现，14.2.20修复了一个ceph身份验证框架中的安全漏洞，增加了相关警告。相关信息，请参考<a target="_blank" rel="noopener" href="https://docs.ceph.com/en/latest/security/CVE-2021-20288/">CVE-2021-20288</a>。可以通过设置将其禁用，文档建议升级到O版后在禁用此设置</p>
<pre><code class="bash">ceph config set mon mon_warn_on_insecure_global_id_reclaim_allowed false
ceph config set mon auth_allow_insecure_global_id_reclaim false
</code></pre>
<h3 id="2-Bucket及VIP验证"><a href="#2-Bucket及VIP验证" class="headerlink" title="2. Bucket及VIP验证"></a>2. Bucket及VIP验证</h3><h4 id="a-VIP连通性"><a href="#a-VIP连通性" class="headerlink" title="a. VIP连通性"></a>a. VIP连通性</h4><pre><code class="bash">ping 10.10.0.250
curl http://10.10.0.250
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;ListAllMyBucketsResult xmlns=&quot;http://s3.amazonaws.com/doc/2006-03-01/&quot;&gt;&lt;Owner&gt;&lt;ID&gt;anonymous&lt;/ID&gt;&lt;DisplayName&gt;&lt;/DisplayName&gt;&lt;/Owner&gt;&lt;Buckets&gt;&lt;/Buckets&gt;&lt;/ListAllMyBucketsResult&gt;
</code></pre>
<h4 id="b-安装S3客户端"><a href="#b-安装S3客户端" class="headerlink" title="b. 安装S3客户端"></a>b. 安装S3客户端</h4><pre><code class="bash">yum install s3cmd -y
</code></pre>
<pre><code class="bash">cat &lt;&lt; EOF &gt; ~/.s3cfg
[default]
access_key = p9wq3vsnRg7xTSzoLs6L
access_token =
add_encoding_exts =
add_headers =
bucket_location = US
ca_certs_file =
cache_file =
check_ssl_certificate = True
check_ssl_hostname = True
cloudfront_host = oss.xuhandsome.org
connection_max_age = 5
connection_pooling = True
content_disposition =
content_type =
default_mime_type = binary/octet-stream
delay_updates = False
delete_after = False
delete_after_fetch = False
delete_removed = False
dry_run = False
enable_multipart = True
encrypt = False
expiry_date =
expiry_days =
expiry_prefix =
follow_symlinks = False
force = False
get_continue = False
gpg_command = /usr/bin/gpg
gpg_decrypt = %(gpg_command)s -d --verbose --no-use-agent --batch --yes --passphrase-fd %(passphrase_fd)s -o %(output_file)s %(input_file)s
gpg_encrypt = %(gpg_command)s -c --verbose --no-use-agent --batch --yes --passphrase-fd %(passphrase_fd)s -o %(output_file)s %(input_file)s
gpg_passphrase =
guess_mime_type = True
host_base = oss.xuhandsome.org
#host_bucket = %(bucket)s.s3.amazonaws.com
host_bucket = oss.xuhandsome.org/%(bucket)
human_readable_sizes = False
invalidate_default_index_on_cf = False
invalidate_default_index_root_on_cf = True
invalidate_on_cf = False
kms_key =
limit = -1
limitrate = 0
list_md5 = False
log_target_prefix =
long_listing = False
max_delete = -1
mime_type =
multipart_chunk_size_mb = 15
multipart_copy_chunk_size_mb = 1024
multipart_max_chunks = 10000
preserve_attrs = True
progress_meter = True
proxy_host =
proxy_port = 0
public_url_use_https = False
put_continue = False
recursive = False
recv_chunk = 65536
reduced_redundancy = False
requester_pays = False
restore_days = 1
restore_priority = Standard
secret_key = 4w4I3bOX0bFZ6YqCWOoDhJ03eTHIAUMohf6wDZC6
send_chunk = 65536
server_side_encryption = False
signature_v2 = False
signurl_use_https = False
simpledb_host = sdb.amazonaws.com
skip_existing = False
socket_timeout = 300
ssl_client_cert_file =
ssl_client_key_file =
stats = False
stop_on_error = False
storage_class =
throttle_max = 100
upload_id =
urlencoding_mode = normal
use_http_expect = False
use_https = False
use_mime_magic = True
verbosity = WARNING
website_endpoint = http://%(bucket)s.s3-website-%(location)s.amazonaws.com/
website_error =
website_index = index.html
EOF
</code></pre>
<h4 id="c-创建bucket"><a href="#c-创建bucket" class="headerlink" title="c. 创建bucket"></a>c. 创建bucket</h4><pre><code class="bash">s3cmd mb s3://test-bucket
Bucket &#39;s3://test-bucket/&#39; created
s3cmd ls
2022-07-17 10:16  s3://test-bucket
</code></pre>
<h4 id="d-上传测试"><a href="#d-上传测试" class="headerlink" title="d. 上传测试"></a>d. 上传测试</h4><pre><code class="bash"># 们ceph-ansible安装配置文件上传上去
s3cmd put --recursive /opt/ansible s3://test-bucket/
</code></pre>
<h4 id="c-下载文件"><a href="#c-下载文件" class="headerlink" title="c. 下载文件"></a>c. 下载文件</h4><pre><code class="bash">s3cmd get s3://test-bucket/ceph-ansible/hosts
download: &#39;s3://test-bucket/ceph-ansible/hosts&#39; -&gt; &#39;./hosts&#39;  [1 of 1]
 448 of 448   100% in    0s    37.97 KB/s  done
</code></pre>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源, 欢迎对文章中的引用来源进行考证, 欢迎指出任何有错误或不够清晰的表达, 可以邮件至 chinaops666@gmail.com </span>
    </div>
</article>





    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '5cd21d93de8a5ac7ac58',
            clientSecret: '6c03e5351b1c062a75648fdbfe8b6e85771489eb',
            repo: 'xuHandsome.github.io',
            owner: 'XuHandsome',
            admin: ['XuHandsome'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2022-2025 XuHandsome
</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
    #post .pjax article :not(pre) > code {
        color: #24292e;
        font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
        background-color: rgba(27,31,35,.05);
        border-radius: 3px;
        font-size: 85%;
        margin: 0;
        padding: .2em .4em;
    }
    
</style>






<div class="mobile-menus-out" >

</div>
<div class="mobile-menus">
    
    
    <a class="dynamic-menu site_url"   href="/gallery/">相册</a>
    
    
</div>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

<div id="musicMouseDrag" style="position:fixed; z-index: 9999; bottom: 0%; right: 100;">
    <meting-js
        server="netease"
        type="playlist"
        id="7620610707"
        fixed="true"
        mini="true"
        autoplay="true"
        list-folded="true">
    </meting-js>
</div>

<script>
  var OriginTitile = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function() {
    if (document.hidden) {
      document.title = "(つェ⊂)我藏好了哦~";
      clearTimeout(titleTime);
    } else {
      document.title = "(*´∇｀*) 被你发现啦~ " + OriginTitile;
      titleTime = setTimeout(function() {
        document.title = OriginTitile;
      }, 500);
    }
  });
</script>
</html>
